---
date: 2017-3-2 11:35
status: public
title: 安卓抽象布局--include、merge 、ViewStub
tags:
  - 安卓
---

摘要:经常在做安卓的时候会用到这些东西，这些东西使得你加载的速度快了不止一倍
<!--more-->
在布局优化中，Android官方提到了这三种布局 include、merge、ViewStub，并介绍了这三种布局各有的优势，下面也是简单说一下他们的优势，以及怎么使用，记下来权当做笔记。

1、布局重用include 使用如下：    
	  LinearLayout 
				xmlns:android="http://schemas.android.com/apk/res/android"  
		    android:orientation="vertical"   
		    android:layout_width="match_parent"  
		    android:layout_height="match_parent"  
		    android:background="@color/app_bg"  
		    android:gravity="center_horizontal">  
		  
		    <include layout="@layout/titlebar"/>  
		  
		    <TextView android:layout_width=”match_parent”  
		              android:layout_height="wrap_content"  
		              android:text="@string/hello"  
		              android:padding="10dp" />  
		LinearLayout 
好处：我们写一个通用布局的时候可以用include重用，不至于写多遍，
比如布局一个APP的顶部布局、侧边栏布局、底部Tab栏布局、ListView和GridView每一项的布局将这些同一个APP中有多个界面用到的布局抽取出来再通过include标签引用，既可以降低layout的复杂度，又可以做到布局重用

2、减少视图层级merge使用如下：  
		merge 
		xmlns:android="http://schemas.android.com/apk/res/android">  
		  
		    <Button  
		        android:layout_width="fill_parent"   
		        android:layout_height="wrap_content"  
		        android:text="@string/add"/>  
		  
		    <Button  
		        android:layout_width="fill_parent"   
		        android:layout_height="wrap_content"  
		        android:text="@string/delete"/>  
		  
		merge   
好处：可以删减多余的层级，优化UI，从而减少视图在绘制过程消耗的时间，达到提高UI性能的效果。

3、需要时使用ViewStub 使用如下：  
		ViewStub  
		    android:id="@+id/stub_import"  
		    android:inflatedId="@+id/panel_import"  
		    android:layout="@layout/progress_overlay"  
		    android:layout_width="fill_parent"  
		    android:layout_height="wrap_content"  
		    android:layout_gravity="bottom"   />  
好处：最大的优点是当你需要时才会加载，他并不会影响UI初始化时的性能，各种不常用的布局想进度条、显示错误消息等可以使用<ViewStub />标签，以减少内存使用量，加快渲染速度。<ViewStub />是一个不可见的，大小为0的View。

